% function category
\newcommand{\func}[1]{\mathbf{Func}_{#1}}
\newcommand{\funci}{\func{\interpretation}}
\newcommand{\val}[1]{\mathbf{Val}_{#1}}
\newcommand{\vali}{\val{\interpretation}}
\newcommand{\valfunc}[1]{\mathbf{VFunc}_{#1}}
\newcommand{\valfunci}{\valfunc{\interpretation}}

% mealy machines
\NewDocumentCommand\mealyoutput{omm}{
    {#2}[{#3}]\IfValueT{#1}{^{#1}}
}
\NewDocumentCommand\mealytransition{omm}{
    \IfValueT{#1}{(}{{#2}_{#3}}\IfValueT{#1}{)^{#1}}
}
\newcommand{\mealytype}[3]{{#1 \xrightarrow{#2} #3}}
\NewDocumentCommand\mealyinitial{o}{
    \bar{s}\IfValueT{#1}{^{#1}}
}

\newcommand{\mealyfunctionoutput}[1]{#1_{1}}
\newcommand{\mealyfunctiontransition}[1]{#1_{0}}
\newcommand{\transitions}[4]{#1^{#2}_0(#3, #4)}


\newcommand{\initialoutput}[2]{#1[#2]}
\newcommand{\streamderivative}[2]{#1_{#2}}

\NewDocumentCommand\streaminit{o}{\mathsf{hd}\IfValueT{#1}{\left(#1\right)}}
\NewDocumentCommand\streamderv{o}{\mathsf{tl}\IfValueT{#1}{\left(#1\right)}}
\newcommand{\streamcons}{\mathbin{::}}
\newcommand{\prefix}[2]{#1(\uparrow{#2})}

\newcommand{\stream}[1]{{#1}^{\omega}}
\newcommand{\causalstreamfuncorder}{\preceq}

\newcommand{\stateassignment}{\gamma}

\newcommand{\approximant}[2]{#1_{#2}}

% categories of stream functions
\newcommand{\streamc}[1]{\mathbf{Stream}_{#1}}
\newcommand{\streamv}{\streamc{\values}}
\newcommand{\streami}{\streamc{\interpretation}}
\newcommand{\cstream}[1]{\mathbf{CStream}_{#1}}
\newcommand{\cstreami}{\cstream{\interpretation}}
\newcommand{\fstream}[1]{\mathbf{FStream}_{#1}}
\newcommand{\fstreami}{\fstream{\interpretation}}

% generators of stream function category
\newcommand{\forkstream}{{\mathsf{fork}}}
\newcommand{\joinstream}{{\mathsf{join}}}
\newcommand{\stubstream}{{\mathsf{stub}}}
\newcommand{\shiftstream}[1]{{\mathsf{shift}_{#1}}}
\newcommand{\valstream}[1]{\mathsf{val}_{#1}}
\newcommand{\gatestream}[1]{\mathsf{gate}_{#1}}

% categories of mealy machine
\newcommand{\mealyi}{\mathbf{Mealy}_{\interpretation}}
\newcommand{\trs}[2]{#1 \,|\, #2}

\newcommand{\mealyarrow}[2]{\xrightarrow{#1\,|\,#2}}
\newcommand{\initial}{\mathsf{s}}
\newcommand{\stcmp}{\triangleright}
\newcommand{\stten}{+}
\newcommand{\auto}[4]{#1~:~#2~\xrightarrow{#3}~#4}
\newcommand{\outp}[2]{O^{#1}_{#2}}
\newcommand{\stateset}[3]{\mathbf{#1}^{#2}_{#3}}
\newcommand{\lifetime}[1]{\mathsf{life}(#1)}
\newcommand{\reg}[1]{v_{#1}}
\newcommand{\fixp}[1]{\mathsf{fix}(#1)}

\newcommand{\statestr}{\sigma}
\newcommand{\canonstr}{\sigma}

\newcommand{\mealy}[1]{\mathbf{Mealy}_{#1}}
\newcommand{\smealy}[1]{\mathbf{SMealy}_{#1}}
\newcommand{\fhom}{{!}}
\newcommand{\ftom}[1]{\llangle#1\rrangle}


\newcommand{\gens}{\nu}

\newcommand{\cfprop}{\mathbf{CFun}}
\NewDocumentCommand\pcsprop{o}{%
\mathbf{PCStream}_{\IfValueT{#1}{#1}}%
}
\newcommand{\uniquestream}{!}
\NewDocumentCommand\mealytostream{o}{%
    {\uniquestream\IfValueTF{#1}{#1}{(-)}}%
}
\NewDocumentCommand\mealytostreami{o}{%
    {\uniquestream_{\mathcal{I}}\IfValueTF{#1}{#1}{(-)}}%
}
\NewDocumentCommand\mealytocircuit{omm}{%
    \left\lvert\left\lvert\IfValueTF{#1}{#1}{-}\right\rvert\right\rvert^{#2}_{#3}%
}
\NewDocumentCommand\mealytocircuiti{o}{%
    \mealytocircuit[\IfValueTF{#1}{#1}{-}]{\leq}{\interpretation}%
}
\NewDocumentCommand\mealytofunc{o}{%
    \lvert\lvert\IfValueTF{#1}{#1}{-}\rvert\rvert%
}
\NewDocumentCommand\streamtomealy{om}{%
    \llangle\IfValueTF{#1}{#1}{-}\rrangle_{#2}%
}
\NewDocumentCommand\streamtomealyi{o}{%
    \streamtomealy[\IfValueTF{#1}{#1}{-}]{\interpretation}%
}

\newcommand{\stateorder}{\preceq}